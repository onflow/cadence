rules:
  - super: Any
    sub: T
    condition:
      always

  - super: AnyStruct
    sub: T
    condition:
      and:
        - not:
            isResource: T
        - not:
            equals:
              source: T
              target: Any

  - super: AnyResource
    sub: T
    condition:
      isResource: T

  - super: AnyResourceAttachment
    sub: T
    condition:
      and:
        - isAttachment: T
        - isResource: T

  - super: AnyStructAttachment
    sub: T
    condition:
      and:
        - isAttachment: T
        - not:
            isResource: T

  - super: HashableStruct
    sub: T
    condition:
      isHashableStruct: T

  - super: Path
    sub: T
    condition:
      subtype:
        sub: T
        super:
          oneOf: [StoragePath, CapabilityPath]

  - super: Storable
    sub: T
    condition:
      isStorable: T

  - super: CapabilityPath
    sub: T
    condition:
      equals:
        source: T
        target:
          oneOf: [PrivatePath, PublicPath]

  - super: Number
    sub: T
    condition:
      or:
        - equals:
            source: T
            target:
              oneOf: [Number, SignedNumber]

        - subtype:
            sub: T
            super:
              oneOf: [Integer, FixedPoint]

  - super: SignedNumber
    sub: T
    condition:
      or:
        - equals:
            source: T
            target: SignedNumber

        - subtype:
            sub: T
            super:
              oneOf: [SignedInteger, SignedFixedPoint]

  - super: Integer
    sub: T
    condition:
      or:
        - equals:
            source: T
            target:
              oneOf: [Integer, SignedInteger, FixedSizeUnsignedInteger, UInt]

        - subtype:
            sub: T
            super:
              oneOf: [SignedInteger, FixedSizeUnsignedInteger]

  - super: SignedInteger
    sub: T
    condition:
      equals:
        source: T
        target:
          oneOf: [SignedInteger, Int, Int8, Int16, Int32, Int64, Int128, Int256]

  - super: FixedSizeUnsignedInteger
    sub: T
    condition:
      equals:
        source: T
        target:
          oneOf: [UInt8, UInt16, UInt32, UInt64, UInt128, UInt256,
                  Word8, Word16, Word32, Word64, Word128, Word256]

  - super: FixedPoint
    sub: T
    condition:
      or: 
        - equals:
            source: T
            target:
              oneOf: [FixedPoint, SignedFixedPoint, UFix64, UFix128]

        - subtype:
            sub: T
            super: 
              oneOf: [SignedFixedPoint]

  - super: SignedFixedPoint
    sub: T
    condition:
      equals:
        source: T
        target:
          oneOf: [SignedFixedPoint, Fix64, Fix128]

  - super:
      Optional:
        inner: U
    sub: T
    condition:
      equals:
        source: T
        target: U

  - super:
      Reference:
        auth: A
        type: B
    sub:
      Reference:
        auth: C
        type: D
    condition:
      and:
        - permits: [B, A]
        - equals:
            source: D
            target: B

  - super:
      Function:
        purity: A
        params: B
        return: C
    sub:
      Function:
        purity: X
        params: Y
        return: Z
    condition:
      and:
        - equals:
            source: X
            target:
              oneOf: [A, PurityView]
        - typeParamsEqual
        - paramsContravariant
        - returnCovariant
        - constructorEqual

  - super:
      Dictionary:
        key: A
        value: B
    sub:
      Dictionary:
        key: C
        value: D
    condition:
      and:
        - equals:
            source: C
            target: A
        - equals:
            source: D
            target: B

  - super:
      Intersection:
        set: A
    sub:
      Intersection:
        set: B
    condition:
      contains: [B, A]
