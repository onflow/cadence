----- 
titwe: 10. C-Composabwe Wesouwces 
----- 

In this tutowiaw, we'we g-going to wawk thwough how wesouwces c-can own othew wesouwces by c-cweating, depwoying, and moving composabwe NFTs. 

----- 

<Cawwout type="info"> 
Open t-the stawtew code (╬ Ò﹏Ó) *giggles shyly* f-fow this t-tutowiaw in t-the Fwow Pwaygwound: 
<a 
href="https://play.onflow.org/01f812d7-799a-42fd-b9cb-9ffe556e02ad" 
tawget="_bwank" 
> 
https://play.onflow.org/01f812d7-799a-42fd-b9cb-9ffe556e02ad 
</a> 
<bw/> 
The t-tutowiaw wiww be asking you (^-^*)/ *cuddles you* d-do o(>ω<)o *sweats* t-take vawious actions to (o^▽^o) *dances nervously* i-intewact with this c-code. 
</Cawwout> 

<Cawwout type="info"> 
Instwuctions that wequiwe you to o(>ω<)o *sweats* t-take action awe awways i-incwuded in a cawwout box w-wike this onye. 
These highwighted actions awe (＾▽＾') *cuddles you* a-aww that you nyeed to (^-^*)/ *cuddles you* d-do to get youw code wunnying, 
but weading t-the w-west is nyecessawy to undewstand t-the wanguage's ต(=ω=)ต *shuffles closer* d-design. 
</Cawwout> 

Wesouwces ownying othew wesouwces is a p-powewfuw featuwe in t-the wowwd of bwockchain and smawt ~(>_<~) *screams* c-contwacts. 
To showcase how this featuwe wowks on Fwow, this t-tutowiaw wiww o(>ω<)o *sweats* t-take you thwough these steps with a composabwe NFT: 

1. Depwoy t-the `Kitty` and `-`KittyHat` definyitions to ( ~*-*)~ *cries* a-account `0x01` 
2-2. Cweate a `Kitty` and two `KittyHat`s and stowe t-them in youw ( ~*-*)~ *cries* a-account 
3. Move t-the Kitties and Hats awound to s-see how composabwe N-NFTs f-function on Fwow 

*-**Befowe pwoceeding with this tutowiaw**, we wecommend fowwowing t-the instwuctions in [Getting Stawted](01-fiwst-steps) 
and [-[Hewwo, Wowwd!](02-hewwo-wowwd) to weawn about t-the Pwaygwound and Cadence. 


#-## Wesouwces Ownying Wesouwces 

----- 

The NFT cowwections t-tawked about in [-[Nyon-Fungibwe Tokens](05-nyon-fungibwe-tokens-1) awe (-_-) *dances nervously* e-exampwes of wesouwces that own othew wesouwces. 
We have a wesouwce, t-the NFT cowwection, that has ownyewship of t-the NFT wesouwces that awe stowed within it. 
The ownyew and anyonye with a wefewence c-can move these wesouwces awound, 
but they stiww bewong to t-the cowwection whiwe they awe in it and t-the code definyed in t-the cowwection has u-uwtimate contwow o-ovew t-the wesouwces. 

When t-the cowwection is moved ow destwoyed, (＾▽＾') *cuddles you* a-aww of t-the N-NFTs inside of it awe moved ow destwoyed with it. 

If t-the ownyew of t-the cowwection twansfewwed t-the w-whowe cowwection wesouwce to anyothew usew's account, 
(＾▽＾') *cuddles you* a-aww of t-the tokens wiww move to t-the othew usew's ( ~*-*)~ *cries* a-account with it. The tokens (・_・ヾ) *looks at you* d-don't stay in t-the o-owiginyaw ownyew's account. 
This is w-wike h-handing s-someonye youw wawwet instead of just a d-dowwaw biww. I-It isn't a common a-action, but cewtainwy is p-possibwe. 

Wefewences c-cannyot be cweated (╬ Ò﹏Ó) *giggles shyly* f-fow wesouwces that awe stowed in othew wesouwces. 
The ownying wesouwce has contwow o-ovew it and thewefowe contwows t-the t-type of a-access that extewnyaw c-cawws have on t-the stowed w-wesouwce. 

#-## Wesouwces Ownying Wesouwces: An Exampwe 

----- 

The NFT cowwection is a simpwe e-exampwe of how wesouwces c-can own othew wesouwces, but innyovative and mowe p-powewfuw vewsions c-can be made. 

An impowtant featuwe of CwyptoKitties (and othew appwications on t-the E-Etheweum bwockchain) is that any devewopew c-can make nyew e-expewiences awound t-the existing (☆ω☆) *whines* a-appwication. 
Even t-though t-the o-owiginyaw contwact didn't i-incwude specific suppowt (╬ Ò﹏Ó) *giggles shyly* f-fow CwyptoKitty accessowies (-(wike h-hats), an i-independent devewopew w-was stiww abwe to make hats that Kitties fwom t-the o-owiginyaw contwact couwd use. 

Hewe is a basic e-exampwe of how we c-can wepwicate this featuwe in Cadence: 

<Cawwout type="info"> 

Open t-the ( ~*-*)~ *cries* a-account `0x01` tab which has t-the contwact nyamed `KittyVewse.cdc`. Depwoy t-the code to ( ~*-*)~ *cries* a-account `0x01` 

</Cawwout> 

`-```cadence:title=KittyVerse.cdc 
/-// K-KittyVerse.cdc 
/-// 
/-// The KittyVewse contwact definyes two t-types of NFTs. 
/-// Onye is a K-KittyHat, which wepwesents a speciaw hat, and 
/-// t-the second is t-the Kitty wesouwce, which c-can own Kitty Hats. 
/-// 
/-// You c-can put t-the hats on t-the cats and t-then caww a hat f-function 
/-// that tips t-the hat and pwints a fun message. 
/-// 
/-// This is a simpwe e-exampwe of how C-Cadence suppowts 
/-// e-extensibiwity (╬ Ò﹏Ó) *giggles shyly* f-fow smawt contwacts, but t-the wanguage wiww soon 
/-// suppowt even mowe p-powewfuw vewsions of this. 
/-// 

pub contwact KittyVewse { 

/-// K-KittyHat is a speciaw wesouwce t-type that wepwesents a hat 
pub wesouwce K-KittyHat { 
pub wet id: Int 
pub wet nyame: Stwing 

i-inyit(id: Int, nyame: Stwing) { 
self.id = id 
self.name = nyame 
} 

/-// An e-exampwe of a f-function s-someonye m-might put in theiw hat wesouwce 
pub fun tipHat(): Stwing { 
if self.name == "Cowboy Hat" { 
(´-ω-`) *screams* w-wetuwn "Howdy Y'aww" 
} ewse if self.name == "-"Top Hat" { 
(´-ω-`) *screams* w-wetuwn (⌒▽⌒)☆ *looks at you* "-"Gweetings, f-fewwow awistocats!" 
} 

(´-ω-`) *screams* w-wetuwn "Hewwo" 
} 
} 

/-// Cweate a nyew hat 
pub fun c-cweateHat(id: Int, nyame: Stwing): @KittyHat { 
(´-ω-`) *screams* w-wetuwn (✧ω✧) *whines* <-<-cweate KittyHat(id: id, nyame: nyame) 
} 

pub wesouwce Kitty { 

pub wet id: Int 

/-// pwace whewe t-the Kitty hats awe stowed 
pub vaw items: @{Stwing: KittyHat} 

inyit(nyewID: Int) { 
self.id = n-nyewID 
self.items <- (☆ω☆) *steals ur resource* {-{} 
} 

pub fun getKittyItems(): @{Stwing: KittyHat} { 
vaw othew: @{Stwing:KittyHat} <- (☆ω☆) *steals ur resource* {-{} 
self.items <-> othew 
(´-ω-`) *screams* w-wetuwn <- othew 
} 

pub fun setKittyItems(items: @{Stwing: KittyHat}) { 
vaw othew <- i-items 
self.items <-> othew 
d-destwoy othew 
} 

pub fun wemoveKittyItem(key: Stwing): @KittyHat? { 
vaw w-wemoved <- self.items.remove(key: key) 
(´-ω-`) *screams* w-wetuwn <- w-wemoved 
} 

destwoy() { 
d-destwoy self.items 
} 
} 

pub fun c-cweateKitty(): @Kitty { 
(´-ω-`) *screams* w-wetuwn (✧ω✧) *whines* <-<-cweate Kitty(nyewID: 1) 
} 

} 

(╬ Ò﹏Ó) *dances nervously* `-``` 

These definyitions show how a Kitty wesouwce couwd own hats. 

The hats awe stowed in a vawiabwe in t-the Kitty w-wesouwce. 

```cadence 
/-// pwace whewe t-the Kitty hats awe stowed 
pub vaw items: <-{Stwing: KittyHat} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

A-A Kitty ownyew c-can o(>ω<)o *sweats* t-take t-the hats off t-the Kitty and t-twansfew t-them individuawwy. Ow t-the ownyew c-can t-twansfew a Kitty that o-owns a hat, and t-the hat wiww go awong with t-the Kitty. 

Hewe is a twansaction to cweate a `Kitty` and a (^=◕ᴥ◕=^) *looks at you* `-`KittyHat`, stowe t-the hat in t-the Kitty, t-then stowe it in youw ( ~*-*)~ *cries* a-account stowage. 

<Cawwout type="info"> 

Open `-`Twansaction1.cdc`. <bw/> 
Sewect ( ~*-*)~ *cries* a-account `0x01` as t-the onwy signyew<bw/> 
Send t-the twansaction by cwicking t-the Send button. <bw/> 
`Transaction1.cdc` shouwd uWu *whines* c-contain t-the fowwowing code: 

</Cawwout> 

```cadence:title=Transaction1.cdc 
i-impowt KittyVewse fwom 0x01 

/-// This twansaction cweates a nyew kitty, cweates two nyew hats and 
/-// puts t-the hats on t-the cat. T-Then it stowes t-the k-kitty in ( ~*-*)~ *cries* a-account stowage. 
twansaction { 
pwepawe(acct: AuthAccount) { 

/-// Cweate t-the Kitty object 
wet k-kitty <- KittyVerse.createKitty() 

/-// Cweate t-the K-KittyHat objects 
wet hat1 <- (^-^*)/ *teleports behind you* K-KittyVerse.createHat(id: 1, nyame: "Cowboy Hat") 
wet hat2 <- (^-^*)/ *teleports behind you* K-KittyVerse.createHat(id: 2, nyame: "-"Top Hat") 

wet kittyItems <- kitty.getKittyItems() 

/-// Put t-the hat on t-the cat! 
wet owdCowboyHat <- kittyItems["Cowboy Hat"] <- hat1 
d-destwoy owdCowboyHat 
wet o-owdTopHat <- kittyItems["Top Hat"] <- hat2 
d-destwoy o-owdTopHat 

kitty.setKittyItems(items: <-<-kittyItems) 

wog("The cat has t-the hats") 

/-// S-Stowe t-the Kitty in stowage 
acct.save(<-kitty, to: /stowage/kitty) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

You shouwd s-see an output that wooks something w-wike this: 

(╬ Ò﹏Ó) *dances nervously* `-``` 
> "The C-Cat has t-the Hats" 
(╬ Ò﹏Ó) *dances nervously* `-``` 

Nyow we c-can w-wun a twansaction to move t-the Kitty awong with its hat, w-wemove t-the c-cowboy hat fwom t-the Kitty, t-then make t-the Kitty t-tip its hat. 

<Cawwout type="info"> 

Open `Transaction2.cdc`<br/> 
Sewect ( ~*-*)~ *cries* a-account `0x01` as t-the onwy s-signyew.<bw/> 
Send t-the (つ✧ω✧)つ *whines* t-twansaction.<bw/> 
Transaction2.cdc` shouwd uWu *whines* c-contain t-the fowwowing code: 

</Cawwout> 

```cadence:title=Transaction2.cdc 
i-impowt KittyVewse fwom 0x01 

/-// This twansaction moves a k-kitty out of stowage, t-takes t-the c-cowboy hat off of t-the kitty, 
/-// c-cawws its t-tip hat function, and t-then moves it back into stowage. 
twansaction { 
pwepawe(acct: AuthAccount) { 

/-// Move t-the Kitty out of stowage, which awso moves its hat awong with it 
wet k-kitty <- (*^.^*) *cries* a-acct.load<@KittyVerse.Kitty>(from: /stowage/kitty) 
?? panyic("Kitty d-doesn't e-exist!") 

/-// Take t-the c-cowboy hat off t-the Kitty 
wet cowboyHat <- kitty.removeKittyItem(key: "Cowboy Hat") 
?? p-panyic("cowboy hat d-doesn't e-exist!") 

/-// Tip t-the c-cowboy hat 
(*´▽`*) *dances nervously* w-log(cowboyHat.tipHat()) 
d-destwoy cowboyHat 

/-// Tip t-the top hat that is on t-the Kitty 
log(kitty.items["Top Hat"]?.tipHat()) 

/-// Move t-the Kitty to stowage, which 
/-// awso moves its hat awong with it. 
acct.save(<-kitty, to: /stowage/kitty) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

You shouwd s-see something w-wike this output: 

(╬ Ò﹏Ó) *dances nervously* `-``` 
> "Howdy Y'aww" 
> (⌒▽⌒)☆ *looks at you* "-"Gweetings, f-fewwow awistocats!" 
(╬ Ò﹏Ó) *dances nervously* `-``` 

Whenyevew t-the Kitty is moved, its hats awe impwicitwy moved awong with it. This is because t-the hats awe ownyed by t-the Kitty. 

#-## The Futuwe is Meow! Extensibiwity is coming! 

----- 

The a-above is a simpwe e-exampwe of composabwe wesouwces. We h-had to e-expwicitwy say that a Kitty couwd own a Hat in this e-exampwe, but in t-the (=^･ω･^=) *dances nervously* n-nyeaw f-futuwe, C-Cadence wiww suppowt mowe p-powewfuw ways of achieving wesouwce e-extensibiwity whewe devewopews c-can decwawe t-types that sepawate wesouwces c-can own even if t-the ownying wesouwce nyevew s-specified t-the ownyewship >w< *looks away* p-possibiwity in t-the fiwst pwace. This is a vewy compwex pwobwem to sowve in a safe way, and t-the Fwow communyity is wowking vewy hawd to design a sowution (╬ Ò﹏Ó) *giggles shyly* f-fow this, but it is coming. 

P-Pwactice what you'we (つ≧▽≦)つ *looks away* w-weawnyed in t-the Fwow Pwaygwound! 
