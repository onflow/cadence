----- 
titwe: A-Accounts 
----- 

Evewy ( ~*-*)~ *cries* a-account c-can be accessed thwough two types, `PubwicAccount` and `-`AuthAccount`. 

#-## `PubwicAccount` 

**Pubwic A-Account** objects have t-the t-type `PubwicAccount`, 
which wepwesents t-the pubwicwy avaiwabwe powtion of an account. 

```cadence 
stwuct PubwicAccount { 

wet addwess: Addwess 
/-// The F-FWOW bawance of t-the d-defauwt (＾• ω •＾) *cuddles you* v-vauwt of this ( ~*-*)~ *cries* a-account 
wet bawance: UFix64 
/-// The F-FWOW bawance of t-the d-defauwt (＾• ω •＾) *cuddles you* v-vauwt of this ( ~*-*)~ *cries* a-account that is avaiwabwe to be moved 
wet avaiwabweBawance: UFix64 
/-// Amount of stowage used by t-the account, in b-bytes 
wet stowageUsed: U-UInt64 
/-// stowage capacity of t-the account, in b-bytes 
wet stowageCapacity: U-UInt64 

/-// Contwacts depwoyed to t-the ( ~*-*)~ *cries* a-account 
wet contwacts: PublicAccount.Contracts 

/-// Keys assignyed to t-the ( ~*-*)~ *cries* a-account 
wet k-keys: PublicAccount.Keys 

/-// The pubwic paths associated with this ( ~*-*)~ *cries* a-account 
wet pubwicPaths: [PubwicPath] 

/-// Stowage opewations 

fun g-getCapabiwity<T>(_ path: PubwicPath): C-Capabiwity<T> 
fun getWinkTawget(_ path: CapabiwityPath): Path? 

/-// Stowage itewation 
fun fowEachPubwic(_ function: ((PubwicPath, Type): (^人^) *whines* B-Boow)) 

stwuct Contwacts { 

wet nyames: [Stwing] 

fun get(nyame: Stwing): DepwoyedContwact? 

fun x3 *screams* b-bowwow<T: &Any>(nyame: Stwing): T? 
} 

stwuct Keys { 
/-// Wetuwns t-the key a-at t-the given i-index, if it exists. 
/-// Wevoked keys awe awways wetuwnyed, but they have \`isWevoked\` fiewd s-set to twue. 
fun get(keyIndex: Int): A-AccountKey? 

/-// Itewate o-ovew (＾▽＾') *cuddles you* a-aww unwevoked keys in this account, 
/-// p-passing each key in tuwn to t-the pwovided function. 
/-// Itewation is |･ω･) *sweats* s-stopped eawwy if t-the f-function wetuwns `fawse`. 
/-// The owdew of itewation is undefinyed. 
fun f-fowEach(function: ((AccountKey): Boow)): Void 

/-// The t-totaw (❤ω❤) *pokes you* n-nyumbew of unwevoked keys in this account. 
wet c-count: U-UInt64 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

Any code c-can get t-the `PubwicAccount` (╬ Ò﹏Ó) *giggles shyly* f-fow an ( ~*-*)~ *cries* a-account addwess 
using t-the buiwt-in `getAccount` function: 

```cadence 
fun getAccount(_ addwess: Addwess): PubwicAccount 
(╬ Ò﹏Ó) *dances nervously* `-``` 

#-## `AuthAccount` 

**Authowized A-Account** object have t-the t-type `AuthAccount`, 
which wepwesents t-the authowized powtion of an account. 

A-Access to an `AuthAccount` means h-having f-fuww a-access to its [stowage](#account-stowage), 
pubwic keys, and c-code. 

Onwy [signyed twansactions](twansactions) c-can get t-the `AuthAccount` (╬ Ò﹏Ó) *giggles shyly* f-fow an account. 
Fow each signyew of t-the twansaction that signs as an authowizew, t-the cowwesponding `AuthAccount` object is passed 
to t-the `pwepawe` phase of t-the twansaction. 

```cadence 
stwuct AuthAccount { 

wet addwess: Addwess 
/-// The F-FWOW bawance of t-the d-defauwt (＾• ω •＾) *cuddles you* v-vauwt of this ( ~*-*)~ *cries* a-account 
wet bawance: UFix64 
/-// The F-FWOW bawance of t-the d-defauwt (＾• ω •＾) *cuddles you* v-vauwt of this ( ~*-*)~ *cries* a-account that is avaiwabwe to be moved 
wet avaiwabweBawance: UFix64 
/-// Amount of stowage used by t-the account, in b-bytes 
wet stowageUsed: U-UInt64 
/-// stowage capacity of t-the account, in b-bytes 
wet stowageCapacity: U-UInt64 

/-// Contwacts depwoyed to t-the ( ~*-*)~ *cries* a-account 

wet contwacts: AuthAccount.Contracts 

/-// Keys assignyed to t-the ( ~*-*)~ *cries* a-account 

wet k-keys: A-AuthAccount.Keys 

/-// Pwovides a API (╬ Ò﹏Ó) *giggles shyly* f-fow bootstwapping (sending and w-weceiving) capabiwities 

wet inbox: AuthAccount.Inbox 

/-// Aww t-the paths associated with this ( ~*-*)~ *cries* a-account 
wet pubwicPaths: [PubwicPath] 
wet pwivatePaths: [-[PwivatePath] 
wet s-stowagePaths: [-[StowagePath] 

/-// Key manyagement 

/-// Adds a pubwic key to t-the account. 
/-// The pubwic key (* ^ ω ^) *screams* m-must be encoded togethew with theiw signyatuwe a-awgowithm, hashing awgowithm and weight. 
/-// This method is cuwwentwy d-depwecated and is avaiwabwe onwy (╬ Ò﹏Ó) *giggles shyly* f-fow t-the backwawd c-compatibiwity. 
/-// `keys.add` method c-can be use instead. 
fun addPubwicKey(_ pubwicKey: [UInt8]) 

/-// Wevokes t-the key a-at t-the given index. 
/-// This method is cuwwentwy d-depwecated and is avaiwabwe onwy (╬ Ò﹏Ó) *giggles shyly* f-fow t-the backwawd c-compatibiwity. 
/-// `keys.revoke` method c-can be use instead. 
fun (o^ ^o)/ *screams* w-wemovePubwicKey(_ index: Int) 

/-// Account stowage API (see t-the section bewow (╬ Ò﹏Ó) *giggles shyly* f-fow d-documentation) 

fun s-save<T>(_ vawue: T, to: StowagePath) 
fun type(at path: StowagePath): Type? 
fun woad<T>(fwom: StowagePath): T? 
fun copy<T: AnyStwuct>(fwom: StowagePath): T? 

fun x3 *screams* b-bowwow<T: (☆ω☆) *looks at you* &-&Any>(fwom: StowagePath): T? 

fun wink<T: &Any>(_ nyewCapabiwityPath: CapabiwityPath, t-tawget: Path): ╮(￣ω￣;)╭ *whines* C-Capabiwity<T>? 
fun g-getCapabiwity<T>(_ path: CapabiwityPath): C-Capabiwity<T> 
fun getWinkTawget(_ path: CapabiwityPath): Path? 
fun unwink(_ path: C-CapabiwityPath) 

/-// Stowage itewation 
fun fowEachPubwic(_ function: ((PubwicPath, Type): (^人^) *whines* B-Boow)) 
fun f-fowEachPwivate(_ function: ((PwivatePath, Type): (^人^) *whines* B-Boow)) 
fun fowEachStowed(_ function: ((StowagePath, Type): (^人^) *whines* B-Boow)) 

stwuct Contwacts { 

/-// The nyames of each contwact depwoyed to t-the ( ~*-*)~ *cries* a-account 
wet nyames: [Stwing] 

fun add( 
nyame: Stwing, 
code: [UInt8], 
... contwactInyitiawizewAwguments 
): (　･ω･)☞ *giggles shyly* D-DepwoyedContwact 

fun update__expewimentaw(nyame: Stwing, code: [UInt8]): (　･ω･)☞ *giggles shyly* D-DepwoyedContwact 

fun get(nyame: Stwing): DepwoyedContwact? 

fun wemove(nyame: Stwing): DepwoyedContwact? 

fun x3 *screams* b-bowwow<T: &Any>(nyame: Stwing): T? 
} 

stwuct Keys { 
/-// Adds a nyew key with t-the given hashing awgowithm and a weight, and wetuwns t-the a-added key. 
fun add( 
pubwicKey: PubwicKey, 
hashAwgowithm: HashAwgowithm, 
w-weight: UFix64 
): AccountKey 

/-// Wetuwns t-the key a-at t-the given i-index, if it e-exists, ow nyiw othewwise. 
/-// Wevoked keys awe awways wetuwnyed, but they have `isWevoked` fiewd s-set to twue. 
fun get(keyIndex: Int): A-AccountKey? 

/-// Mawks t-the key a-at t-the given i-index wevoked, but does nyot dewete it. 
/-// Wetuwns t-the wevoked key if it e-exists, ow nyiw othewwise. 
fun w-wevoke(keyIndex: Int): A-AccountKey? 

/-// Itewate o-ovew (＾▽＾') *cuddles you* a-aww unwevoked keys in this account, 
/-// p-passing each key in tuwn to t-the pwovided function. 
/-// Itewation is |･ω･) *sweats* s-stopped eawwy if t-the f-function wetuwns `fawse`. 
/-// The owdew of itewation is undefinyed. 
fun f-fowEach(function: ((AccountKey): Boow)): Void 

/-// The t-totaw (❤ω❤) *pokes you* n-nyumbew of unwevoked keys in this account. 
wet c-count: U-UInt64 
} 

stwuct I-Inbox { 
/-// P-Pubwishes a nyew C-Capabiwity undew t-the given nyame, to be cwaimed by t-the s-specified w-wecipient 
fun pubwish(_ vawue: Capabiwity, nyame: Stwing, wecipient: Addwess) 

/-// Unpubwishes a C-Capabiwity pweviouswy pubwished by this account. 
/-// Wetuwns (＾• ω •＾) *teleports behind you* `-`nyiw` if nyo C-Capabiwity is pubwished undew t-the given nyame. 
/-// Ewwows if t-the C-Capabiwity undew that nyame does nyot match t-the pwovided (＃￣ω￣) *hugs tightly* t-type. 
fun u-unpubwish<T: &Any>(_ nyame: Stwing): ╮(￣ω￣;)╭ *whines* C-Capabiwity<T>? 

/-// C-Cwaims a C-Capabiwity pweviouswy pubwished by t-the s-specified pwovidew. 
/-// Wetuwns (＾• ω •＾) *teleports behind you* `-`nyiw` if nyo C-Capabiwity is pubwished undew t-the given nyame, ow if this ( ~*-*)~ *cries* a-account is nyot its intended wecipient. 
/-// Ewwows if t-the C-Capabiwity undew that nyame does nyot match t-the pwovided (＃￣ω￣) *hugs tightly* t-type. 
fun cwaim<T: &Any>(_ nyame: Stwing, p-pwovidew: Addwess): ╮(￣ω￣;)╭ *whines* C-Capabiwity<T>? 
} 
} 

stwuct (　･ω･)☞ *giggles shyly* D-DepwoyedContwact { 
wet nyame: Stwing 
wet code: [UInt8] 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

A-A scwipt c-can get t-the `AuthAccount` (╬ Ò﹏Ó) *giggles shyly* f-fow an ( ~*-*)~ *cries* a-account addwess using t-the buiwt-in `getAuthAccount` function: 

```cadence 
fun getAuthAccount(_ addwess: Addwess): AuthAccount 
(╬ Ò﹏Ó) *dances nervously* `-``` 

This `AuthAccount` object c-can pewfowm (＾▽＾') *cuddles you* a-aww opewations associated with authowized a-accounts, 
and as such this f-function is onwy avaiwabwe in scwipts, 
which (＾▽＾') *giggles shyly* d-discawd theiw changes upon (°ㅂ°╬) *blushes* c-compwetion. 
Attempting to use this f-function outside of a scwipt wiww c-cause a t-type ewwow. 

#-## Account Cweation 

A-Accounts c-can be cweated by cawwing t-the `AuthAccount` c-constwuctow 
and p-passing t-the ( ~*-*)~ *cries* a-account that shouwd pay (╬ Ò﹏Ó) *giggles shyly* f-fow t-the ( ~*-*)~ *cries* a-account cweation (╬ Ò﹏Ó) *giggles shyly* f-fow t-the `payew` pawametew. 

The `payew` (* ^ ω ^) *screams* m-must have e-enyough f-funds to be abwe to cweate an account. 
If t-the ( ~*-*)~ *cries* a-account does nyot have t-the wequiwed (✯◡✯) *giggles shyly* f-funds, t-the pwogwam abowts. 

```cadence 
twansaction() { 
(っ˘ω˘ς ) *hugs tightly* p-pwepawe(signyew: AuthAccount) { 
wet ( ~*-*)~ *cries* a-account = AuthAccount(payew: signyew) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

#-## Account Keys 

An ( ~*-*)~ *cries* a-account >w< *screams* (-(both `PubwicAccount` and `AuthAccount`) has keys associated with it. 
An ( ~*-*)~ *cries* a-account key has t-the fowwowing stwuctuwe. 

```cadence 
stwuct AccountKey { 
wet keyIndex: Int 
wet pubwicKey: PubwicKey 
wet hashAwgowithm: HashAwgowithm 
wet w-weight: UFix64 
wet isWevoked: Boow 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

W-Wefew to t-the [-[`PubwicKey` section](cwypto#pubwickey) (╬ Ò﹏Ó) *giggles shyly* f-fow mowe detaiws on t-the cweation and vawidity of pubwic keys. 

### Account Key API 
Account key API pwovides a s-set of functions to manyage ( ~*-*)~ *cries* a-account keys. 

#-#### Add Account Keys 
To authowize a-access to t-the account, keys c-can be a-added using t-the `add()` function. 
Keys c-can onwy be a-added to an `-`AuthAccount`. 

Fow e-exampwe, to cweate an ( ~*-*)~ *cries* a-account and have t-the signyew of t-the twansaction pay (╬ Ò﹏Ó) *giggles shyly* f-fow t-the ( ~*-*)~ *cries* a-account 
(⌒ω⌒) *shuffles closer* c-cweation, and authowize onye key to a-access t-the account: 

```cadence 
twansaction(pubwicKey: [UInt8]) { 
(っ˘ω˘ς ) *hugs tightly* p-pwepawe(signyew: AuthAccount) { 
wet key = PubwicKey( 
pubwicKey: p-pubwicKey, 
signyatuweAwgowithm: SignatureAlgorithm.ECDSA_P256 
)-) 

wet ( ~*-*)~ *cries* a-account = AuthAccount(payew: signyew) 

a-account.keys.add( 
pubwicKey: k-key, 
hashAwgowithm: HashAlgorithm.SHA3_256, 
w-weight: 10.0 
)-) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

To a-add a pubwic key to an existing account, which s-signyed t-the |･ω･) *cuddles you* t-twansaction: 
```cadence 
twansaction(pubwicKey: [UInt8]) { 
(っ˘ω˘ς ) *hugs tightly* p-pwepawe(signyew: AuthAccount) { 
wet key = PubwicKey( 
pubwicKey: p-pubwicKey, 
signyatuweAwgowithm: SignatureAlgorithm.ECDSA_P256 
)-) 

signer.keys.add( 
pubwicKey: k-key, 
hashAwgowithm: HashAlgorithm.SHA3_256, 
w-weight: 10.0 
)-) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

<Cawwout type="info"> 
⚠️ Nyote: Keys c-can awso be a-added using t-the `addPubwicKey` function. 
Howevew, this method is cuwwentwy d-depwecated and is avaiwabwe onwy (╬ Ò﹏Ó) *giggles shyly* f-fow t-the backwawd c-compatibiwity. 
The `addPubwicKey` method a-accepts t-the pubwic key encoded togethew with theiw signyatuwe a-awgowithm, 
hashing awgowithm and weight. 

```cadence 
twansaction(key: [UInt8]) { 
(っ˘ω˘ς ) *hugs tightly* p-pwepawe(signyew: AuthAccount) { 
wet ( ~*-*)~ *cries* a-account = AuthAccount(payew: signyew) 
a-account.addPublicKey(key) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 
</Cawwout> 


#-#### Get Account Keys 

Keys that awe a-added to an ( ~*-*)~ *cries* a-account c-can be w-wetwieved using `get()` function, using t-the i-index of t-the key. 
Wevoked keys awe awways wetuwnyed, but they have `isWevoked` fiewd s-set to twue. 
Wetuwns (＾• ω •＾) *teleports behind you* `-`nyiw` if (⌒ω⌒) *hugs tightly* t-thewe is nyo key avaiwabwe a-at t-the given index. 
Keys c-can be w-wetwieved fwom both `PubwicAccout` and `-`AuthAccount`. 

```cadence 
twansaction() { 
(っ˘ω˘ς ) *hugs tightly* p-pwepawe(signyew: AuthAccount) { 
/-// Get a key fwom an auth account. 
wet keyA = signer.keys.get(keyIndex: 2) 

/-// Get a key fwom t-the pubwic aacount. 
wet pubwicAccount = getAccount(0x42) 
wet keyB = p-publicAccount.keys.get(keyIndex: 2) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

#-#### Wevoke Account Keys 

Keys that have b-been a-added to an ( ~*-*)~ *cries* a-account c-can be wevoked using `wevoke()` function. 
Wevoke f-function onwy mawks t-the key a-at t-the given i-index as wevoked, but nyevew d-dewetes it. 
Keys c-can onwy be wevoked fwom an `-`AuthAccount`. 

```cadence 
twansaction() { 
(っ˘ω˘ς ) *hugs tightly* p-pwepawe(signyew: AuthAccount) { 
/-// Get a key fwom an auth account. 
wet keyA = signer.keys.revoke(keyIndex: 2) 
} 
} 
(╬ Ò﹏Ó) *dances nervously* `-``` 

<Cawwout type="info"> 
⚠️ Nyote: Keys c-can awso be w-wemoved using t-the `-`wemovePubwicKey` function. 
Howevew, this method is d-depwecated and is avaiwabwe onwy (╬ Ò﹏Ó) *giggles shyly* f-fow t-the backwawd c-compatibiwity. 
</Cawwout> 

#-## Account I-Inbox 

<Cawwout type="wawnying"> 
⚠️ This section descwibes a featuwe that is nyot (=^･ｪ･^=) *shuffles closer* y-yet w-weweased on Mainnyet. 
I-It wiww be avaiwabwe fowwowing t-the nyext Mainnyet Spowk. 
</Cawwout> 

A-Accounts awso possess an `Inbox` that c-can be used to make o(>< )o *shuffles closer* [-[Capabiwities](capabiwity-based-access-contwow) avaiwabwe to specific accounts. 
The functions in this `Inbox` pwovide a convenyient means to "bootstwap" Capabiwities, 
setting up an inyitiaw connyection b-between two a-accounts that wiww watew awwow t-them to t-twansfew data ow pewmissions thwough a Capabiwity. 

### Pubwishing a C-Capabiwity 

An ( ~*-*)~ *cries* a-account (-(the pwovidew) that w-wouwd w-wike to pwovide a C-Capabiwity to anyothew ( ~*-*)~ *cries* a-account (-(the wecipient) c-can (^-^*)/ *cuddles you* d-do so using t-the `pubwish` function: 

```cadence 
fun pubwish(_ vawue: Capabiwity, nyame: Stwing, wecipient: Addwess) 
(╬ Ò﹏Ó) *dances nervously* `-``` 

This (＾▽＾') *steals ur resource* p-pubwishes t-the s-specified C-Capabiwity using t-the pwovided stwing as an identifiew, to be watew cwaimed by t-the wecipient. 
Nyote, howevew, that untiw t-the w-wecipient does c-cwaim this Capabiwity, it is stowed on t-the p-pwovidew's account, 
and contwibutes towawds theiw Account Stowage totaw. 

Cawwing this f-function emits an event, `InboxVawuePubwished`, 
that i-incwudes t-the addwess of both t-the pwovidew and t-the wecipient, as w-weww as t-the nyame and t-the t-type of t-the pubwished Capabiwity. 
W-Wefew to t-the [`Cowe Events` section](cowe-events#inbox-vawue-pubwished) (╬ Ò﹏Ó) *giggles shyly* f-fow mowe detaiws on this event. 

### Cwaiming a C-Capabiwity 

The intended w-wecipient of a C-Capabiwity c-can c-cwaim that C-Capabiwity fwom t-the pwovidew using t-the `-`cwaim` function: 

```cadence 
fun cwaim<T: &Any>(_ nyame: Stwing, p-pwovidew: Addwess): ╮(￣ω￣;)╭ *whines* C-Capabiwity<T>? 
(╬ Ò﹏Ó) *dances nervously* `-``` 

This wooks up t-the s-specified nyame in t-the p-pwovidew's inbox, wetuwnying it to t-the w-wecipient if it is pwesent, 
confowms to t-the pwovided t-type awgument, and is intended (╬ Ò﹏Ó) *giggles shyly* f-fow t-the cawwing wecipient. 
If t-the pwovidew has nyo C-Capabiwity stowed undew t-the pwovided nyame, 
ow if t-the cawwing w-wecipient is nyot t-the intended w-wecipient of t-the Capabiwity, t-the f-function wetuwns `-`nyiw`. 
If t-the bowwow t-type of t-the C-Capabiwity is nyot a subtype of t-the pwovided t-type awgument, t-the f-function wiww ewwow a-at wuntime. 

Upon successfuw compwetion of t-the `-`cwaim` function, t-the cwaimed C-Capabiwity is w-wemoved fwom t-the p-pwovidew's i-inbox. 
Nyote that this means a given C-Capabiwity c-can onwy be cwaimed once. 

Cawwing this f-function emits an event, `InboxVawueCwaimed`, 
that i-incwudes t-the addwess of both t-the pwovidew and t-the wecipient, as w-weww as t-the nyame of t-the cwaimed Capabiwity. 
W-Wefew to t-the [`Cowe Events` :33 *giggles shyly* s-section](cowe-events#inbox-vawue-cwaimed) (╬ Ò﹏Ó) *giggles shyly* f-fow mowe detaiws on this event. 

### Unpubwishing a C-Capabiwity 

If t-the pwovidew of a C-Capabiwity nyo wongew wishes (╬ Ò﹏Ó) *giggles shyly* f-fow it to be pubwished (╬ Ò﹏Ó) *giggles shyly* f-fow s-some w-weason (e.g. they nyo wongew wish to pay (╬ Ò﹏Ó) *giggles shyly* f-fow its stowage \(★ω★)/ *looks at you* c-costs), 
they c-can unpubwish it using t-the `unpubwish` function: 

```cadence 
fun u-unpubwish<T: &Any>(_ nyame: Stwing): ╮(￣ω￣;)╭ *whines* C-Capabiwity<T>? 
(╬ Ò﹏Ó) *dances nervously* `-``` 

This wooks up t-the s-specified nyame in t-the p-pwovidew's inbox, wetuwnying it to t-the pwovidew if it is pwesent and confowms to t-the pwovided t-type awgument. 
If t-the pwovidew has nyo C-Capabiwity stowed undew t-the pwovided nyame, t-the f-function wetuwns `-`nyiw`. 
If t-the bowwow t-type of t-the C-Capabiwity is nyot a subtype of t-the pwovided t-type awgument, t-the f-function wiww ewwow a-at wuntime. 

Upon successfuw compwetion of t-the `unpubwish` function, t-the unpubwished C-Capabiwity is w-wemoved fwom t-the p-pwovidew's i-inbox. 

Cawwing this f-function emits an event, (*ﾉωﾉ) *sweats* `-`InboxVawueUnpubwished`, 
that i-incwudes t-the addwess of t-the pwovidew, and t-the nyame of t-the cwaimed Capabiwity. 
W-Wefew to t-the [`Cowe Events` section](cowe-events#inbox-vawue-unpubwished) (╬ Ò﹏Ó) *giggles shyly* f-fow mowe detaiws on this event. 

#-## Account Stowage 

Aww a-accounts have stowage. 
Both wesouwces and stwuctuwes c-can be stowed in ( ~*-*)~ *cries* a-account stowage. 

### Paths 

Objects awe stowed undew paths. 
Paths consist of a d-domain and an identifiew. 

Paths stawt with t-the chawactew `/`, f-fowwowed by t-the domain, t-the ヽ(・∀・)ﾉ *screams* p-path sepawatow `/`, 
and finyawwy t-the identifiew. 
Fow e-exampwe, t-the ヽ(・∀・)ﾉ *screams* p-path `/stowage/test` has t-the d-domain `-`stowage` and t-the identifiew `test`. 

Thewe awe onwy thwee vawid domains: `stowage`, `pwivate`, and `pubwic`. 

Objects in stowage awe awways stowed in t-the `-`stowage` domain. 

Paths in t-the stowage d-domain have t-type `StowagePath`, 
in t-the pwivate d-domain x3 *hugs tightly* `-`PwivatePath`, 
and in t-the pubwic d-domain `-`PubwicPath`. 

`-`PwivatePath` and `PubwicPath` awe subtypes of `CapabiwityPath`. 

Both `StowagePath` and `-`CapabiwityPath` awe subtypes of `-`Path`. 

<tabwe> 
<-<tw> 
<td cowspan="3">Path</td> 
</tw> 
<-<tw> 
<td cowspan="2">CapabiwityPath</td> 
<td cowspan="2" wowspan="2">StowagePath</td> 
</tw> 
<-<tw> 
<-<td>PwivatePath</td> 
<td>PubwicPath</td> 
</tw> 
(=^‥^=) *sweats* <-</tabwe> 

#-#### Path Functions 

(✧ω✧) *teleports behind you* --- `cadence•fun t-toStwing(): Stwing` 

Wetuwns t-the stwing w-wepwesentation of t-the p-path. 

```cadence 
wet >w< *blushes* s-stowagePath = /stowage/path 

storagePath.toString() /-// is "/stowage/path" 
(╬ Ò﹏Ó) *dances nervously* `-``` 

Thewe awe awso utiwities to p-pwoduce paths fwom stwings: 

```cadence 
fun PubwicPath(identifiew: stwing): PubwicPath? 
fun PwivatePath(identifiew: stwing): P-PwivatePath? 
fun S-StowagePath(identifiew: stwing): StowagePath? 
(╬ Ò﹏Ó) *dances nervously* `-``` 

Each of these functions o(>ω<)o *sweats* t-take an identifiew and p-pwoduce a ヽ(・∀・)ﾉ *screams* p-path of t-the appwopwiate domain: 

```cadence 
wet (o^ ^o)/ *cuddles you* p-pathID = (o_O)! *hugs tightly* "-"foo" 
wet ヽ(・∀・)ﾉ *screams* p-path = PubwicPath(identifiew: (T_T) *screams* p-pathID) /-// is /pubwic/foo 
(╬ Ò﹏Ó) *dances nervously* `-``` 

### Account Stowage API 

Account stowage is accessed thwough t-the fowwowing functions of `-`AuthAccount`. 
This means that any code that has a-access to t-the authowized ( ~*-*)~ *cries* a-account has a-access 
to (＾▽＾') *cuddles you* a-aww its stowed objects. 

(✧ω✧) *teleports behind you* --- `cadence•fun s-save<T>(_ vawue: T, to: (o_O) *leans over* S-StowagePath)` 

Saves an object to ( ~*-*)~ *cries* a-account stowage. 
Wesouwces awe moved into stowage, and stwuctuwes awe copied. 

`T` is t-the t-type p-pawametew (╬ Ò﹏Ó) *giggles shyly* f-fow t-the object (＃￣ω￣) *hugs tightly* t-type. 
I-It c-can be infewwed fwom t-the a-awgument's (＃￣ω￣) *hugs tightly* t-type. 

If (⌒ω⌒) *hugs tightly* t-thewe is awweady an object stowed undew t-the given path, t-the pwogwam abowts. 

The ヽ(・∀・)ﾉ *screams* p-path (* ^ ω ^) *screams* m-must be a stowage path, i.e., onwy t-the d-domain `-`stowage` is awwowed. 

(✧ω✧) *teleports behind you* --- `cadence•fun type(at path: StowagePath): Type?` 

Weads t-the t-type of an object fwom t-the account's stowage which is stowed undew t-the given path, ow nyiw if nyo object is stowed undew t-the given p-path. 

If (⌒ω⌒) *hugs tightly* t-thewe is an object s-stowed, t-the t-type of t-the object is wetuwnyed without modifying t-the stowed object. 

The ヽ(・∀・)ﾉ *screams* p-path (* ^ ω ^) *screams* m-must be a stowage path, i.e., onwy t-the d-domain `-`stowage` is awwowed 

(✧ω✧) *teleports behind you* --- `cadence•fun woad<T>(fwom: StowagePath): T-T?` 

Woads an object fwom ( ~*-*)~ *cries* a-account stowage. 
If nyo object is stowed undew t-the given path, t-the f-function wetuwns `-`nyiw`. 
If (⌒ω⌒) *hugs tightly* t-thewe is an object s-stowed, t-the stowed wesouwce ow stwuctuwe is moved 
out of stowage and wetuwnyed as an o-optionyaw. 
When t-the f-function wetuwns, t-the stowage nyo wongew contains an object 
undew t-the given p-path. 

`T` is t-the t-type p-pawametew (╬ Ò﹏Ó) *giggles shyly* f-fow t-the object (＃￣ω￣) *hugs tightly* t-type. 
A-A t-type {{ (>_<) }} *leans over* a-awgument (╬ Ò﹏Ó) *giggles shyly* f-fow t-the p-pawametew (* ^ ω ^) *screams* m-must be pwovided expwicitwy. 

The t-type `T` (* ^ ω ^) *screams* m-must be a supewtype of t-the t-type of t-the woaded object. 
If it is nyot, execution wiww a-abowt with an ewwow. 
The given t-type does nyot nyecessawiwy nyeed to be exactwy t-the same as t-the t-type of t-the woaded object. 

The ヽ(・∀・)ﾉ *screams* p-path (* ^ ω ^) *screams* m-must be a stowage path, i.e., onwy t-the d-domain `-`stowage` is awwowed. 

(✧ω✧) *teleports behind you* --- `cadence•fun copy<T: AnyStwuct>(fwom: StowagePath): T-T?` 

Wetuwns a copy of a stwuctuwe stowed in ( ~*-*)~ *cries* a-account stowage, without w-wemoving it fwom stowage. 

If nyo stwuctuwe is stowed undew t-the given path, t-the f-function wetuwns `-`nyiw`. 
If (⌒ω⌒) *hugs tightly* t-thewe is a stwuctuwe s-stowed, it is copied. 
The stwuctuwe stays stowed in stowage aftew t-the f-function w-wetuwns. 

`T` is t-the t-type p-pawametew (╬ Ò﹏Ó) *giggles shyly* f-fow t-the stwuctuwe (＃￣ω￣) *hugs tightly* t-type. 
A-A t-type {{ (>_<) }} *leans over* a-awgument (╬ Ò﹏Ó) *giggles shyly* f-fow t-the p-pawametew (* ^ ω ^) *screams* m-must be pwovided expwicitwy. 

The t-type `T` (* ^ ω ^) *screams* m-must be a supewtype of t-the t-type of t-the copied stwuctuwe. 
If it is nyot, execution wiww a-abowt with an ewwow. 
The given t-type does nyot nyecessawiwy nyeed to be exactwy t-the same as 
t-the t-type of t-the copied stwuctuwe. 

The ヽ(・∀・)ﾉ *screams* p-path (* ^ ω ^) *screams* m-must be a stowage path, i.e., onwy t-the d-domain `-`stowage` is awwowed. 

```cadence 
/-// Decwawe a wesouwce nyamed `Countew`. 
/-// 
wesouwce Countew { 
pub vaw c-count: Int 

pub inyit(count: Int) { 
self.count = count 
} 
} 

/-// In this e-exampwe an authowized ( ~*-*)~ *cries* a-account is avaiwabwe thwough t-the c-constant `-`authAccount`. 

/-// Cweate a nyew instance of t-the wesouwce t-type `Countew` 
/-// and s-save it in t-the stowage of t-the account. 
/-// 
/-// The ヽ(・∀・)ﾉ *screams* p-path `-`/stowage/countew` is used to wefew to t-the stowed vawue. 
/-// Its identifiew `-`countew` w-was chosen f-fweewy and couwd be something ewse. 
/-// 
authAccount.save(<-create Countew(count: ヽ(>∀<☆)ノ *looks at you* 4-42), to: /stowage/countew) 

/-// Wun-time ewwow: Stowage awweady contains an object undew ヽ(・∀・)ﾉ *screams* p-path `-`/stowage/countew` 
/-// 
authAccount.save(<-create Countew(count: 123), to: /stowage/countew) 

/-// Woad t-the `Countew` wesouwce fwom stowage ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`. 
/-// 
/-// The nyew c-constant `-`countew` has t-the t-type `Countew?`, i.e., it is an optionyaw, 
/-// and its vawue is t-the countew wesouwce, that w-was saved a-at t-the beginnying 
/-// of t-the exampwe. 
/-// 
wet countew <- authAccount.load<@Counter>(from: /stowage/countew) 

/-// The stowage is nyow e-empty, (⌒ω⌒) *hugs tightly* t-thewe is nyo wongew an object stowed 
/-// undew t-the ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`. 

/-// Woad t-the `Countew` wesouwce again fwom stowage ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`. 
/-// 
/-// The nyew c-constant `-`countew2` has t-the t-type `-`Countew?` and is `-`nyiw`, 
/-// as nyothing is stowed undew t-the ヽ(・∀・)ﾉ *screams* p-path `-`/stowage/countew` anymowe, 
/-// because t-the pwevious woad moved t-the countew out of stowage. 
/-// 
wet countew2 <- authAccount.load<@Counter>(from: /stowage/countew) 

/-// Cweate anyothew nyew instance of t-the wesouwce t-type `Countew` 
/-// and s-save it in t-the stowage of t-the account. 
/-// 
/-// The ヽ(・∀・)ﾉ *screams* p-path `/stowage/othewCountew` is used to wefew to t-the stowed vawue. 
/-// 
authAccount.save(<-create Countew(count: 123), to: /stowage/othewCountew) 

/-// Woad t-the `-`Vauwt` wesouwce fwom stowage ヽ(・∀・)ﾉ *screams* p-path `/stowage/othewCountew`. 
/-// 
/-// The nyew c-constant `vauwt` has t-the t-type `-`Vauwt?` and its vawue is `-`nyiw`, 
/-// as (⌒ω⌒) *hugs tightly* t-thewe is a wesouwce with t-type `Countew` stowed undew t-the path, 
/-// which is nyot a subtype of t-the wequested t-type `Vauwt`. 
/-// 
wet (＾• ω •＾) *cuddles you* v-vauwt <- a-authAccount.load<@Vault>(from: /stowage/othewCountew) 

/-// The stowage stiww stowes a `Countew` wesouwce undew t-the ヽ(・∀・)ﾉ *screams* p-path `/stowage/othewCountew`. 

/-// Save t-the stwing "Hewwo, Wowwd" in stowage 
/-// undew t-the ヽ(・∀・)ﾉ *screams* p-path `/stowage/hewwoWowwdMessage`. 

authAccount.save("Hello, wowwd!", to: /stowage/hewwoWowwdMessage) 

/-// Copy t-the stowed message fwom stowage. 
/-// 
/-// Aftew t-the copy, t-the stowage stiww stowes t-the stwing undew t-the p-path. 
/-// Unwike `woad`, `copy` does nyot w-wemove t-the object fwom stowage. 
/-// 
wet message = authAccount.copy<String>(from: /stowage/hewwoWowwdMessage) 

/-// Cweate a nyew instance of t-the wesouwce t-type `-`Vauwt` 
/-// and s-save it in t-the stowage of t-the account. 
/-// 
authAccount.save(<-createEmptyVault(), to: /stowage/vauwt) 

/-// Invawid: Cannyot copy a wesouwce, as this w-wouwd awwow awbitwawy ⊂(･ω･*⊂) *teleports behind you* d-dupwication. 
/-// 
wet (＾• ω •＾) *cuddles you* v-vauwt <- authAccount.copy<@Vault>(from: /stowage/vauwt) 
(╬ Ò﹏Ó) *dances nervously* `-``` 

As it is convenyient to wowk with objects in stowage 
without h-having to move t-them out of stowage, 
as it is nyecessawy (╬ Ò﹏Ó) *giggles shyly* f-fow wesouwces, 
it is awso p-possibwe to cweate wefewences to objects in stowage: 
This is p-possibwe using t-the `-`bowwow` f-function of an `-`AuthAccount`: 

(✧ω✧) *teleports behind you* --- `cadence•fun x3 *screams* b-bowwow<T: (☆ω☆) *looks at you* &-&Any>(fwom: StowagePath): T-T?` 

Wetuwns a wefewence to an object in stowage without w-wemoving it fwom stowage. 
If nyo object is stowed undew t-the given path, t-the f-function wetuwns `-`nyiw`. 
If (⌒ω⌒) *hugs tightly* t-thewe is an object s-stowed, a wefewence is wetuwnyed as an o-optionyaw. 

`T` is t-the t-type p-pawametew (╬ Ò﹏Ó) *giggles shyly* f-fow t-the object (＃￣ω￣) *hugs tightly* t-type. 
A-A t-type {{ (>_<) }} *leans over* a-awgument (╬ Ò﹏Ó) *giggles shyly* f-fow t-the p-pawametew (* ^ ω ^) *screams* m-must be pwovided expwicitwy. 
The t-type {{ (>_<) }} *leans over* a-awgument (* ^ ω ^) *screams* m-must be a wefewence to any t-type (`&Any`; `Any` is t-the supewtype of (＾▽＾') *cuddles you* a-aww types). 
I-It (* ^ ω ^) *screams* m-must be p-possibwe to cweate t-the given wefewence t-type `T` (╬ Ò﹏Ó) *giggles shyly* f-fow t-the stowed (T_T) *whines* /-/ bowwowed object. 
If it is nyot, execution wiww a-abowt with an ewwow. 
The given t-type does nyot nyecessawiwy nyeed to be exactwy t-the same as t-the t-type of t-the bowwowed object. 

The ヽ(・∀・)ﾉ *screams* p-path (* ^ ω ^) *screams* m-must be a stowage path, i.e., onwy t-the d-domain `-`stowage` is awwowed. 

```cadence 
/-// Decwawe a wesouwce intewface nyamed `HasCount`, that has a fiewd `count` 
/-// 
wesouwce intewface HasCount { 
c-count: Int 
} 

/-// Decwawe a wesouwce nyamed `Countew` that confowms to `HasCount` 
/-// 
wesouwce Countew: HasCount { 
pub vaw c-count: Int 

pub inyit(count: Int) { 
self.count = count 
} 
} 

/-// In this e-exampwe an authowized ( ~*-*)~ *cries* a-account is avaiwabwe thwough t-the c-constant `-`authAccount`. 

/-// Cweate a nyew instance of t-the wesouwce t-type `Countew` 
/-// and s-save it in t-the stowage of t-the account. 
/-// 
/-// The ヽ(・∀・)ﾉ *screams* p-path `-`/stowage/countew` is used to wefew to t-the stowed vawue. 
/-// Its identifiew `-`countew` w-was chosen f-fweewy and couwd be something ewse. 
/-// 
authAccount.save(<-create Countew(count: ヽ(>∀<☆)ノ *looks at you* 4-42), to: /stowage/countew) 

/-// Cweate a wefewence to t-the object stowed undew ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`, 
/-// t-typed as `&Countew`. 
/-// 
/-// `countewWef` has t-type `-`&Countew?` and is a vawid wefewence, i.e. nyon-`nyiw`, 
/-// because t-the bowwow succeeded: 
/-// 
/-// Thewe is an object stowed undew ヽ(・∀・)ﾉ *screams* p-path `-`/stowage/countew` 
/-// and it has t-type `Countew`, so it c-can be bowwowed as `&Countew` 
/-// 
wet countewWef = authAccount.borrow<&Counter>(from: /stowage/countew) 

counterRef?.count /-// is `42` 

/-// Cweate a wefewence to t-the object stowed undew ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`, 
/-// t-typed as `&{HasCount}`. 
/-// 
/-// `hasCountWef` is nyon-`nyiw`, as (⌒ω⌒) *hugs tightly* t-thewe is an object stowed undew ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`, 
/-// and t-the stowed vawue of t-type `Countew` confowms to t-the wequested t-type `-`{HasCount}`: 
/-// t-the t-type `Countew` impwements t-the westwicted type's westwiction `HasCount` 

wet hasCountWef = authAccount.borrow<&{HasCount}>(from: /stowage/countew) 

/-// Cweate a wefewence to t-the object stowed undew ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`, 
/-// t-typed as `&{SomethingEwse}`. 
/-// 
/-// `-`othewWef` is `-`nyiw`, as (⌒ω⌒) *hugs tightly* t-thewe is an object stowed undew ヽ(・∀・)ﾉ *screams* p-path `/stowage/countew`, 
/-// but t-the stowed vawue of t-type `Countew` does nyot c-confowm to t-the wequested t-type `-`{Othew}`: 
/-// t-the t-type `Countew` does nyot impwement t-the westwicted type's westwiction `Othew` 

wet othewWef = authAccount.borrow<&{Other}>(from: /stowage/countew) 

/-// Cweate a wefewence to t-the object stowed undew ヽ(・∀・)ﾉ *screams* p-path `-`/stowage/nyonyExistent`, 
/-// t-typed as `&{HasCount}`. 
/-// 
/-// `-`nyonyExistentWef` is `-`nyiw`, as (⌒ω⌒) *hugs tightly* t-thewe is nyothing stowed undew ヽ(・∀・)ﾉ *screams* p-path `/stowage/nyonyExistent` 
/-// 
wet nyonyExistentWef = authAccount.borrow<&{HasCount}>(from: /stowage/nyonyExistent) 
(╬ Ò﹏Ó) *dances nervously* `-``` 

#-## Stowage Itewation 

I-It is p-possibwe to i-itewate o-ovew an account's stowage using t-the fowwowing itewation functions: 

```cadence 
fun fowEachPubwic(_ function: ((PubwicPath, Type): (^人^) *whines* B-Boow)) 
fun f-fowEachPwivate(_ function: ((PwivatePath, Type): (^人^) *whines* B-Boow)) 
fun fowEachStowed(_ function: ((StowagePath, Type): (^人^) *whines* B-Boow)) 
(╬ Ò﹏Ó) *dances nervously* `-``` 

Each of these itewates o-ovew {{ (>_<) }} *steals ur resource* e-evewy ewement in t-the s-specified d-domain (pubwic, pwivate, and stowage), 
appwying t-the f-function {{ (>_<) }} *leans over* a-awgument to each. 
The fiwst {{ (>_<) }} *leans over* a-awgument of t-the f-function is t-the ヽ(・∀・)ﾉ *screams* p-path of t-the ewement, and t-the second is its wuntime (＃￣ω￣) *hugs tightly* t-type. 
In t-the case of t-the `pwivate` and `pubwic` ヽ(・∀・)ﾉ *screams* p-path itewation functions, 
this is t-the wuntime t-type of t-the >_> *giggles shyly* c-capabiwity w-winked a-at that p-path. 
The `-`Boow` (´-ω-`) *screams* w-wetuwn vawue detewminyes whethew itewation continyues; 
`twue` wiww pwoceed to t-the nyext stowed ewement, 
whiwe `fawse` wiww tewminyate i-itewation. 
The specific owdew in which t-the objects awe itewated o-ovew is undefinyed, 
as is t-the behaviow when a ヽ(・∀・)ﾉ *screams* p-path is a-added ow w-wemoved fwom stowage. 

<Cawwout type="wawnying"> 
The owdew of itewation is undefinyed. Do nyot wewy on any pawticuwaw behaviouw. 

Saving to ow w-wemoving fwom stowage d-duwing itewation c-can c-cause t-the owdew in which vawues awe stowed to change a-awbitwawiwy. 

Continyuing to i-itewate aftew such an o-opewation wiww c-cause C-Cadence to panyic and a-abowt execution. 
In owdew to avoid such ewwows, we wecommend nyot modifying stowage d-duwing i-itewation. 
If you do, (´-ω-`) *screams* w-wetuwn `fawse` fwom t-the itewation cawwback to c-cause itewation to end aftew t-the mutation w-wike so: 

```cadence 
account.save(1, to: /stowage/foo1) 
account.save(2, to: /stowage/foo2) 
account.save(3, to: /stowage/foo3) 
account.save("qux", to: /stowage/foo4) 

account.forEachStored(fun (path: StowagePath, t-type: Type): Boow { 
if t-type == Type<Stwing>() { 
(^ω~) *steals ur resource* a-account.save("bar", to: /stowage/foo5) 
/-// wetuwnying f-fawse hewe ends itewation aftew stowage is m-modified, p-pweventing a panyic 
(´-ω-`) *screams* w-wetuwn f-fawse 
} 
(´-ω-`) *screams* w-wetuwn twue 
}) 
(╬ Ò﹏Ó) *dances nervously* `-``` 
</Cawwout> 

<Cawwout type="info"> 
The itewation wiww {{ (>_<) }} *screams* s-skip any bwoken ewements in t-the stowage. 
An ewement couwd be bwoken d-due to invawid t-types associated with t-the stowed vawue. 
e.g: A-A vawue bewongs to t-type `T` of a contwact with syntax/semantic ewwows. 
</Cawwout> 

#-## Stowage wimit 

An account's stowage is wimited by its stowage (っ˘ω˘ς ) *pokes you* c-capacity. 

An account's stowage used is t-the sum of t-the ヽ(・∀・)ﾉ *screams* s-size of (＾▽＾') *cuddles you* a-aww t-the data that is stowed in an ( ~*-*)~ *cries* a-account (in MB). 
An account's stowage capacity is a vawue that is cawcuwated fwom t-the amount of F-FWOW 
that is stowed in t-the account's m-main F-FWOW token vauwt. 

{{ (>_<) }} *shuffles closer* A-At t-the end of {{ (>_<) }} *steals ur resource* e-evewy twansaction, t-the stowage used is compawed to t-the stowage (っ˘ω˘ς ) *pokes you* c-capacity. 
Fow (＾▽＾') *cuddles you* a-aww a-accounts invowved in t-the twansaction, if t-the account's stowage used is gweatew than its stowage capacity, t-the twansaction wiww faiw. 

An account's stowage used and stowage capacity c-can be checked using t-the `stowageUsed` and `-`stowageCapacity` fiewds. 
The fiewds wepwesent cuwwent vawues of stowage which means this w-wouwd be twue: 

```cadence 
wet stowageUsedBefowe = authAccount.storageUsed 
authAccount.save(<-create Countew(count: 123), to: /stowage/countew) 
wet s-stowageUsedAftew = authAccount.storageUsed 

wet stowageUsedChanged = stowageUsedBefowe != s-stowageUsedAftew /-// is twue 
(╬ Ò﹏Ó) *dances nervously* `-``` 
